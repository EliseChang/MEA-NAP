Preparing Data
===============

This pipeline has been specifically designed to work with data from two types of MEA recording systems: the **Multi-channel Systems MEA2100 60-channel MEA system** and the     **6-well Axion Maestro MEA system**. To ensure the success of your analysis, it is essential to prepare your data correctly before feeding it into the pipeline.

MEA recording systems generate raw data in various formats, and these formats may not be directly compatible with MEA-NAP Data preparation is required to:

  - Convert the raw data files into a standardized format (.mat) that MEA-NAP can process effectively.

  - Organize and name your files following a specific convention to facilitate easy identification and categorization during analysis.

1. Convert Files
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

The file conversion process is an essential step in preparing your data for MEA-NAP. This step is applicable to different types of files generated by multi-channel and Axion Maestro System. Below, you will find step-by-step instructions for each file conversion process.


**Converting Files from Multi-channel Acquisition System to .mat Files:**

  1. Open MC_DataTool.
  2. Select File > Open Multiple.
  3. Choose the files of interest.
  4. Click "bin."
  5. Click "All."
  6. Ensure "Write header" and "Signed 16bit" are checked in the lower right.
  7. Click Save.
  8. When done, click Close.
  9. Open MATLAB.
  10. Add the analysis pipeline code to the path.
  11. Navigate in MATLAB to the folder containing the '.mcd' files you want to convert.
  12. In the MATLAB command window, type ``MEAbatchConvert`` and press Enter to run.

**Converting Files from 6-Well MEA Axion Maestro Acquisition System to .mat Files:**

  1. Save .raw files from the MEA Axion Maestro system to one folder.
  2. Copy the directory path of the folder containing .raw files.
  3. Verify that rawConvert.m and fillBatchFile.m are installed and saved in the same folder as AxIS MATLAB Files.
  4. Open rawConvert.m.
  5. Fill out user parameters in Rawconvert.m according to instructions provided in rawConvert.m.
  6. Click Run.
  7. After RawConvert.m has successfully run, open the folder where .raw files were initially stored.
  8. Navigate through the folder to check that all .mat files have been successfully created and saved.


2. Follow Filename Conventions
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

To maintain an organized and consistent structure for your MEA recording MAT files, we recommend following the format below. This format will help you easily identify and categorize your data:

- **ExperimentName_YYYYMMDD_PlateNumber_DIVXX_Well**

  - **ExperimentName:** Provide a unique name or identifier for your experiment.

  - **YYYYMMDD (optional):** 
    - If you want to include date of initiation or date of recording, follow this date format.  Concatenate the year, month, and day of the date you want to include. For example, "20231101" represents November 1, 2023.

  - **PlateNumber:** Specify the plate number or identifier for your MEA plate.

  - **DIVXX:** DIV stands for "Days In Vitro," followed by the culture's age at the time of recording (XX). For example, "DIV10" represents the culture at 10 days in vitro.

  - **Well (optional):** 
    - Specify the well location where the recording took place. Use a combination of a letter and a number to identify the well, such as "A1," "A2," "A3," "B1," "B2," or "B3."

**Example filenames:**

  - DRPLA_220525_P1_DIV48_A1.mat
  - DRPLA_220525_P4_DIV48_B1.mat